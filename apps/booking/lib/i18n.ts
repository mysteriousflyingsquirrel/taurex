const translations: Record<string, Record<string, string>> = {
  en: {
    "nav.backToHome": "Back to Home",
    "filter.dateRange": "Dates",
    "filter.dates": "Dates",
    "filter.checkIn": "Check-in",
    "filter.checkOut": "Check-out",
    "filter.guests": "Guests",
    "filter.onlyAvailable": "Show only available",
    "filter.reset": "Reset",
    "apartments.title": "Our Apartments",
    "apartments.empty": "No apartments available.",
    "apartments.emptyFiltered": "No apartments match your filter.",
    "apartments.map": "Map",
    "apartment.perNight": "/ night",
    "apartment.promoActive": "Special offer",
    "apartment.promoPeriod": "{start} - {end}",
    "apartment.guests": "Guests",
    "apartment.bedrooms": "Bedrooms",
    "apartment.doubleBeds": "Double beds",
    "apartment.singleBeds": "Single beds",
    "apartment.bathrooms": "Bathrooms",
    "apartment.sqm": "m²",
    "apartment.description": "Description",
    "apartment.amenities": "Amenities",
    "apartment.location": "Location",
    "apartment.facts": "Facts",
    "apartment.bookingLinks": "Book this apartment",
    "apartment.directBooking": "Booking Request",
    "apartment.minStay": "Minimum stay: {nights} nights",
    "apartment.moreApartments": "More apartments",
    "apartment.noImages": "No images available",
    "apartment.availability": "Availability",
    "apartment.availabilityComingSoon": "Coming soon...",
    "apartment.availabilityHint": "Select check-in and check-out dates. Unavailable dates are disabled.",
    "apartment.unavailableRange": "Selected range is not available.",
    "apartment.booking": "Booking",
    "apartment.selectDatesFirst": "Please select your dates on the apartment listing page to see pricing.",
    "apartment.selectedDates": "Selected dates",
    "apartment.bestPriceTitle": "Best price guaranteed!",
    "apartment.bestPriceDesc": "Book directly through our booking request and get the cheapest price available.",
    "apartment.nightsSelected": "{nights} nights selected",
    "apartment.approxTotal": "Approx. total: {total}",
    "apartment.approxDisclaimer": "Approximate estimate. Final price at the discretion of the host.",
    "apartment.minStayError": "This stay does not meet the minimum stay of {nights} nights.",
    "apartment.confirmTitle": "Confirm booking request",
    "apartment.nights": "nights",
    "apartment.guestName": "Full name *",
    "apartment.guestEmail": "Email address *",
    "apartment.guestMessage": "Message (optional)",
    "apartment.submitRequest": "Send booking request",
    "apartment.submitting": "Submitting...",
    "apartment.cancel": "Cancel",
    "apartment.requestIdentityRequired": "Name and email are required.",
    "apartment.requestSuccess": "Booking request sent. The host will review your request.",
    "apartment.requestFailed": "Failed to submit booking request.",
    "notFound.host": "Host not found",
    "notFound.apartment": "Apartment not found",
    "notFound.backToHost": "Back to apartments",
    "notFound.backToHome": "Back to Taurex",
  },
  de: {
    "nav.backToHome": "Zurück zur Startseite",
    "filter.dateRange": "Reisedaten",
    "filter.dates": "Daten",
    "filter.checkIn": "Anreise",
    "filter.checkOut": "Abreise",
    "filter.guests": "Gäste",
    "filter.onlyAvailable": "Nur verfügbare anzeigen",
    "filter.reset": "Zurücksetzen",
    "apartments.title": "Unsere Apartments",
    "apartments.empty": "Keine Apartments verfügbar.",
    "apartments.emptyFiltered": "Keine Apartments für Ihre Auswahl gefunden.",
    "apartments.map": "Karte",
    "apartment.perNight": "/ Nacht",
    "apartment.promoActive": "Spezialangebot",
    "apartment.promoPeriod": "{start} - {end}",
    "apartment.guests": "Gäste",
    "apartment.bedrooms": "Schlafzimmer",
    "apartment.doubleBeds": "Doppelbetten",
    "apartment.singleBeds": "Einzelbetten",
    "apartment.bathrooms": "Badezimmer",
    "apartment.sqm": "m²",
    "apartment.description": "Beschreibung",
    "apartment.amenities": "Ausstattung",
    "apartment.location": "Standort",
    "apartment.facts": "Fakten",
    "apartment.bookingLinks": "Dieses Apartment buchen",
    "apartment.directBooking": "Buchungsanfrage",
    "apartment.minStay": "Mindestaufenthalt: {nights} Nächte",
    "apartment.moreApartments": "Weitere Apartments",
    "apartment.noImages": "Keine Bilder verfügbar",
    "apartment.availability": "Verfügbarkeit",
    "apartment.availabilityComingSoon": "Demnächst verfügbar...",
    "apartment.availabilityHint": "Wählen Sie An- und Abreisedatum. Nicht verfügbare Tage sind deaktiviert.",
    "apartment.unavailableRange": "Der gewählte Zeitraum ist nicht verfügbar.",
    "apartment.booking": "Buchung",
    "apartment.selectDatesFirst": "Bitte wählen Sie Ihre Daten auf der Apartmentübersicht, um Preise zu sehen.",
    "apartment.selectedDates": "Ausgewählte Daten",
    "apartment.bestPriceTitle": "Bestpreis garantiert!",
    "apartment.bestPriceDesc": "Buchen Sie direkt über unsere Buchungsanfrage und erhalten Sie den günstigsten Preis.",
    "apartment.nightsSelected": "{nights} Nächte ausgewählt",
    "apartment.approxTotal": "Ca. Gesamtpreis: {total}",
    "apartment.approxDisclaimer": "Ungefähre Schätzung. Endpreis nach Ermessen des Gastgebers.",
    "apartment.minStayError": "Dieser Aufenthalt erfüllt den Mindestaufenthalt von {nights} Nächten nicht.",
    "apartment.confirmTitle": "Buchungsanfrage bestätigen",
    "apartment.nights": "Nächte",
    "apartment.guestName": "Vollständiger Name *",
    "apartment.guestEmail": "E-Mail-Adresse *",
    "apartment.guestMessage": "Nachricht (optional)",
    "apartment.submitRequest": "Buchungsanfrage senden",
    "apartment.submitting": "Wird gesendet...",
    "apartment.cancel": "Abbrechen",
    "apartment.requestIdentityRequired": "Name und E-Mail sind erforderlich.",
    "apartment.requestSuccess": "Buchungsanfrage gesendet. Der Gastgeber prüft Ihre Anfrage.",
    "apartment.requestFailed": "Buchungsanfrage konnte nicht gesendet werden.",
    "notFound.host": "Gastgeber nicht gefunden",
    "notFound.apartment": "Apartment nicht gefunden",
    "notFound.backToHost": "Zurück zu den Apartments",
    "notFound.backToHome": "Zurück zu Taurex",
  },
  fr: {
    "nav.backToHome": "Retour à l'accueil",
    "filter.dateRange": "Dates de séjour",
    "filter.dates": "Dates",
    "filter.checkIn": "Arrivée",
    "filter.checkOut": "Départ",
    "filter.guests": "Voyageurs",
    "filter.onlyAvailable": "Afficher uniquement les disponibles",
    "filter.reset": "Réinitialiser",
    "apartments.title": "Nos appartements",
    "apartments.empty": "Aucun appartement disponible.",
    "apartments.emptyFiltered": "Aucun appartement ne correspond à votre filtre.",
    "apartments.map": "Carte",
    "apartment.perNight": "/ nuit",
    "apartment.promoActive": "Offre spéciale",
    "apartment.promoPeriod": "{start} - {end}",
    "apartment.guests": "Voyageurs",
    "apartment.bedrooms": "Chambres",
    "apartment.doubleBeds": "Lits doubles",
    "apartment.singleBeds": "Lits simples",
    "apartment.bathrooms": "Salles de bain",
    "apartment.sqm": "m²",
    "apartment.description": "Description",
    "apartment.amenities": "Équipements",
    "apartment.location": "Emplacement",
    "apartment.facts": "Caractéristiques",
    "apartment.bookingLinks": "Réserver cet appartement",
    "apartment.directBooking": "Demande de réservation",
    "apartment.minStay": "Séjour minimum : {nights} nuits",
    "apartment.moreApartments": "Plus d'appartements",
    "apartment.noImages": "Aucune image disponible",
    "apartment.availability": "Disponibilité",
    "apartment.availabilityComingSoon": "Bientôt disponible...",
    "apartment.availabilityHint": "Sélectionnez les dates d'arrivée et de départ. Les dates indisponibles sont désactivées.",
    "apartment.unavailableRange": "La période sélectionnée n'est pas disponible.",
    "apartment.booking": "Réservation",
    "apartment.selectDatesFirst": "Veuillez sélectionner vos dates sur la page de liste pour voir les prix.",
    "apartment.selectedDates": "Dates sélectionnées",
    "apartment.bestPriceTitle": "Meilleur prix garanti !",
    "apartment.bestPriceDesc": "Réservez directement via notre demande de réservation et obtenez le prix le plus avantageux.",
    "apartment.nightsSelected": "{nights} nuits sélectionnées",
    "apartment.approxTotal": "Total approx. : {total}",
    "apartment.approxDisclaimer": "Estimation approximative. Le prix final est à la discrétion de l'hôte.",
    "apartment.minStayError": "Ce séjour ne respecte pas le minimum de {nights} nuits.",
    "apartment.confirmTitle": "Confirmer la demande de réservation",
    "apartment.nights": "nuits",
    "apartment.guestName": "Nom complet *",
    "apartment.guestEmail": "Adresse e-mail *",
    "apartment.guestMessage": "Message (optionnel)",
    "apartment.submitRequest": "Envoyer la demande",
    "apartment.submitting": "Envoi en cours...",
    "apartment.cancel": "Annuler",
    "apartment.requestIdentityRequired": "Le nom et l'e-mail sont obligatoires.",
    "apartment.requestSuccess": "Demande envoyée. L'hôte examinera votre demande.",
    "apartment.requestFailed": "Échec de l'envoi de la demande.",
    "notFound.host": "Hôte introuvable",
    "notFound.apartment": "Appartement introuvable",
    "notFound.backToHost": "Retour aux appartements",
    "notFound.backToHome": "Retour à Taurex",
  },
  it: {
    "nav.backToHome": "Torna alla home",
    "filter.dateRange": "Date di soggiorno",
    "filter.dates": "Date",
    "filter.checkIn": "Check-in",
    "filter.checkOut": "Check-out",
    "filter.guests": "Ospiti",
    "filter.onlyAvailable": "Mostra solo disponibili",
    "filter.reset": "Reimposta",
    "apartments.title": "I nostri appartamenti",
    "apartments.empty": "Nessun appartamento disponibile.",
    "apartments.emptyFiltered": "Nessun appartamento corrisponde al filtro.",
    "apartments.map": "Mappa",
    "apartment.perNight": "/ notte",
    "apartment.promoActive": "Offerta speciale",
    "apartment.promoPeriod": "{start} - {end}",
    "apartment.guests": "Ospiti",
    "apartment.bedrooms": "Camere",
    "apartment.doubleBeds": "Letti matrimoniali",
    "apartment.singleBeds": "Letti singoli",
    "apartment.bathrooms": "Bagni",
    "apartment.sqm": "m²",
    "apartment.description": "Descrizione",
    "apartment.amenities": "Dotazioni",
    "apartment.location": "Posizione",
    "apartment.facts": "Caratteristiche",
    "apartment.bookingLinks": "Prenota questo appartamento",
    "apartment.directBooking": "Richiesta di prenotazione",
    "apartment.minStay": "Soggiorno minimo: {nights} notti",
    "apartment.moreApartments": "Altri appartamenti",
    "apartment.noImages": "Nessuna immagine disponibile",
    "apartment.availability": "Disponibilità",
    "apartment.availabilityComingSoon": "Prossimamente...",
    "apartment.availabilityHint": "Seleziona check-in e check-out. Le date non disponibili sono disattivate.",
    "apartment.unavailableRange": "L'intervallo selezionato non è disponibile.",
    "apartment.booking": "Prenotazione",
    "apartment.selectDatesFirst": "Seleziona le date nella pagina degli appartamenti per vedere i prezzi.",
    "apartment.selectedDates": "Date selezionate",
    "apartment.bestPriceTitle": "Miglior prezzo garantito!",
    "apartment.bestPriceDesc": "Prenota direttamente tramite la nostra richiesta di prenotazione e ottieni il prezzo più conveniente.",
    "apartment.nightsSelected": "{nights} notti selezionate",
    "apartment.approxTotal": "Totale appross.: {total}",
    "apartment.approxDisclaimer": "Stima approssimativa. Il prezzo finale è a discrezione dell'host.",
    "apartment.minStayError": "Questo soggiorno non soddisfa il minimo di {nights} notti.",
    "apartment.confirmTitle": "Conferma richiesta di prenotazione",
    "apartment.nights": "notti",
    "apartment.guestName": "Nome completo *",
    "apartment.guestEmail": "Indirizzo email *",
    "apartment.guestMessage": "Messaggio (opzionale)",
    "apartment.submitRequest": "Invia richiesta",
    "apartment.submitting": "Invio in corso...",
    "apartment.cancel": "Annulla",
    "apartment.requestIdentityRequired": "Nome ed email sono obbligatori.",
    "apartment.requestSuccess": "Richiesta inviata. L'host la valuterà a breve.",
    "apartment.requestFailed": "Invio della richiesta non riuscito.",
    "notFound.host": "Proprietario non trovato",
    "notFound.apartment": "Appartamento non trovato",
    "notFound.backToHost": "Torna agli appartamenti",
    "notFound.backToHome": "Torna a Taurex",
  },
};

export function t(lang: string, key: string, params?: Record<string, string | number>): string {
  const str = translations[lang]?.[key] ?? translations.en[key] ?? key;
  if (!params) return str;
  return Object.entries(params).reduce(
    (acc, [k, v]) => acc.replace(`{${k}}`, String(v)),
    str
  );
}

export function getLang(langParam: string | null, hostLanguages: string[]): string {
  if (langParam && hostLanguages.includes(langParam)) return langParam;
  return hostLanguages[0] ?? "en";
}

